<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title></title>
    <link rel="stylesheet" href="<%$smarty.const.ACSS_URL%>common.css?version=1.01.01"/>
    <link rel="stylesheet" href="<%$smarty.const.ACSS_URL%>login.css?version=1.01.01"/>
    <!-- jQuery  -->
    <script src="<%$smarty.const.PUBLIC_ROOT_URL%>assets/js/jquery.min.js"></script>
    <style>
        .login_bg{
            background: #ffffff;
        }
    </style>
</head>
<body>
    <div id="login"></div>
    <div class="login_bg">
        <div id="logo">
            <!--img src="<%$smarty.const.AIMAGE_URL%>logo.png" alt=""/-->
        </div>
        <form action="" onSubmit="return chkinput(this)" method="post">
            <div class="userName">
                <lable>用户名：</lable>
                <input type="text" name="name" id="name" oninput="chkname()" placeholder="请输入用户名" />
            </div>
            <div class="passWord">
                <lable>密&nbsp;&nbsp;&nbsp;码：</lable>
                <input type="password" name="password" id="password" placeholder="请输入密码" />
            </div>
            <div class="choose_box">
                <div>
                    <input type="checkbox" checked="checked" name="remember" id="remember"/>
                    <lable>记住密码</lable>
                </div>
                <!--a href="newPassword.html">忘记密码</a-->
            </div>
            <button class="login_btn" type="submit">登&nbsp;&nbsp;录</button>
        </form>
        <!--div class="other_login">
            <div class="other"></div>
            <span>其他方式登录</span>
            <div class="other"></div>
        </div-->
        <!--div class="other_choose">
            <a href="">
                <img src="<%$smarty.const.AIMAGE_URL%>qq.png" alt=""/>
            </a>
            <a href="">
                <img src="<%$smarty.const.AIMAGE_URL%>wx.png" alt=""/>
            </a>
            <a href="">
                <img src="<%$smarty.const.AIMAGE_URL%>wb.png" alt=""/>
            </a>
        </div-->
        <footer class="footer text-right">
            Copyright &copy; 2018.爱加社区
        </footer>
    </div>
</body>
</html>
<script type="text/javascript">
    $(document).ready(function(){
        var strName = localStorage.getItem('keyName');
        var strPass = localStorage.getItem('keyPass');
        //alert(strName);
        if(strName){
            $('#name').val(strName);
        }
        //alert(strPass);
        if(strPass){
            $('#password').val(strPass);
        }

    });

    function chkinput(form){
        var strName = $('#name').val();
        var strPass =  $('#password').val();

        if(typeof(Storage)!=="undefined") {

        }else{
            alert("浏览器不支持记住密码.");
            return false;
            //主逻辑业务
        }
        if(strName==""){
            alert('请输入手机号.');
            form.name.select();
            return(false);
        }

        if(strPass==""){
            alert('请输入密码.');
            form.password.select();
            return(false);
        }

        localStorage.setItem('keyName',strName);
        if($('#remember').is(':checked')){
            localStorage.setItem('keyPass',strPass);
        }else{
            localStorage.removeItem('keyPass');
        }
        return(true);
    }

    function chkname(){
        var strName = $('#name').val();
        var strPass =  $('#password').val();
        var strPreName = localStorage.getItem('keyName');

        if(strPreName!=strName){
            localStorage.removeItem('keyPass');
            $('#password').val("");
        }
        return(true);
    }

    function GetLocalIPAddr(){
        var oSetting = null;
        var ip = null;
        try{
            oSetting = new ActiveXObject("rcbdyctl.Setting");
            ip = oSetting.GetIPAddress;
            if (ip.length == 0)
            {
                return "没有连接到Internet";
            }
            oSetting = null;
        }catch(e) {
            return ip;
        }
        return ip;
    }

</script>
